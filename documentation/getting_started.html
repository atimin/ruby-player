
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Getting started - RubyPlayer</title>
  <meta name="author" content="Aleksey Timin">

  
  <meta name="description" content="Getting Started Jun 21st, 2012 The RubyPlayer works with player server by TCP protocol. For begin, we must open TCP connection with server and close &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://flipback.github.com/ruby-player/documentation/getting_started.html">
  <link href="/ruby-player/favicon.png" rel="icon">
  <link href="/ruby-player/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/ruby-player/javascripts/modernizr-2.0.js"></script>
  <script src="/ruby-player/javascripts/ender.js"></script>
  <script src="/ruby-player/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/ruby-player/atom.xml" rel="alternate" title="RubyPlayer" type="application/atom+xml">
  <script type="text/javascript">
/* <![CDATA[ */
  (function() {
       var s = document.createElement('script'), t = document.getElementsByTagName('script')[0];
       s.type = 'text/javascript';
       s.async = true;
       s.src = 'http://api.flattr.com/js/0.6/load.js?mode=auto';
       t.parentNode.insertBefore(s, t);
   })();
/* ]]> */</script>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-12356703-4']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <div style="float:right;">
  <a class="FlattrButton" style="display:none;" href="https://github.com/flipback/ruby-player"></a>
  <noscript>
    <a href="http://flattr.com/thing/655988/RubyPlayer-on-GitHub" target="_blank">
      <img src="http://api.flattr.com/button/flattr-badge-large.png" alt="Flattr this" title="Flattr this" border="0" />
    </a>
  </noscript>
</div>

  <h1><a href="/ruby-player/">RubyPlayer</a></h1>
  
    <h2>Play with robots fun!</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/ruby-player/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:flipback.github.com/ruby-player" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/ruby-player/about">About</a></li>
  <li><a href="/ruby-player/">News</a></li>
  <li><a href="/ruby-player/documentation">Documentation</a></li>
  <li><a href="http://github.com/flipback/ruby-player">Code</a></li>
  <li><a href="http://rdoc.info/gems/ruby-player">API</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article role="article">
  
  <header>
    <h1 class="entry-title">Getting Started</h1>
    <p class="meta">








  


<time datetime="2012-06-21T23:15:00+06:00" pubdate data-updated="true">Jun 21<span>st</span>, 2012</time></p>
  </header>
  
  <p>The RubyPlayer works with player server by TCP protocol. For begin, we must open TCP connection with server and close it in end:</p>

<div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="nb">require</span> <span class="s1">&#39;ruby-player&#39;</span>
</span><span class='line'>    <span class="n">cl</span> <span class="o">=</span> <span class="no">Player</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span> <span class="s2">&quot;localhost&quot;</span>
</span><span class='line'>  <span class="c1"># Your code</span>
</span><span class='line'>  <span class="n">cl</span><span class="o">.</span><span class="n">close</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">#alternate syntax with block</span>
</span><span class='line'>  <span class="no">Player</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">connect</span> <span class="s2">&quot;localhost&quot;</span> <span class="k">do</span> <span class="o">|</span><span class="n">cl</span><span class="o">|</span>
</span><span class='line'>    <span class="c1"># Your code</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>


<p>We may set connection options:</p>

<ol>
<li><strong>port</strong> - TCP port for connection. It's equal 6665 by default.</li>
<li><strong>log_level</strong> - Logging level equal :info by default. It may be :error, :warn, :info and :debug.</li>
</ol>


<p>Example connection with opts:</p>

<div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="n">cl</span> <span class="o">=</span> <span class="no">Player</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">new</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span> <span class="n">port</span><span class="p">:</span><span class="mi">9999</span><span class="p">,</span> <span class="n">log_level</span><span class="ss">:&#39;debug&#39;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>


<p>Next step it's subscribing to device of robot. All device have typical interface and index. For more info see documentation on <a href="http://playerstage.sourceforge.net/doc/Player-svn/player/">playerstage site</a>. RubyPlayer supported two way for it:</p>

<div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="no">Player</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">connect</span> <span class="s1">&#39;localhost&#39;</span> <span class="k">do</span> <span class="o">|</span><span class="n">cl</span><span class="o">|</span>
</span><span class='line'>    <span class="n">pose</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="ss">:position2d</span><span class="p">,</span> <span class="n">index</span><span class="p">:</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># First method</span>
</span><span class='line'>    <span class="n">pose</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">position2d</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>                   <span class="c1"># Second method for ruby-player &gt;= 0.6.0</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>


<p>For us result of subscribing is proxy object by which we can send command to robot, query configuration data and read current state. The RubyPlayer sends command and requests in moment of call related method, but reading data from server is implemented by client object. For example:</p>

<div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="c1"># subscribing code above</span>
</span><span class='line'>  <span class="n">pose</span><span class="o">.</span><span class="n">query_geom</span>                 <span class="c1"># request geom data</span>
</span><span class='line'>  <span class="n">pose</span><span class="o">.</span><span class="n">set_speed</span><span class="p">(</span><span class="n">vx</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">2</span><span class="p">,</span> <span class="n">vy</span><span class="p">:</span><span class="mi">0</span><span class="o">.</span><span class="mi">4</span><span class="p">)</span>  <span class="c1"># set speed of robot in [m/s]</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">cl</span><span class="o">.</span><span class="n">read!</span>                        <span class="c1"># client request buffering data from server for all proxies </span>
</span><span class='line'>
</span><span class='line'>  <span class="n">pose</span><span class="o">.</span><span class="n">geom</span>                       <span class="c1">#=&gt; Hash of geom data</span>
</span><span class='line'>  <span class="n">pose</span><span class="o">.</span><span class="n">state</span>                      <span class="c1">#=&gt; Hash of current state</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>


<p>For comfort, RubyPlayer has <code>Client#loop</code> method for cyclic request servers. Example of typical struct your application:</p>

<div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="no">Player</span><span class="o">::</span><span class="no">Client</span><span class="o">.</span><span class="n">connect</span> <span class="s1">&#39;localhost&#39;</span> <span class="k">do</span> <span class="o">|</span><span class="n">cl</span><span class="o">|</span>
</span><span class='line'>    <span class="c1"># Subscribing</span>
</span><span class='line'>    <span class="n">pose</span> <span class="o">=</span> <span class="n">cl</span><span class="o">.</span><span class="n">position2d</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>    <span class="c1"># Initial commands</span>
</span><span class='line'>    <span class="n">pose</span><span class="o">.</span><span class="n">set_speed</span><span class="p">(</span><span class="n">vx</span><span class="p">:</span> <span class="mi">0</span><span class="o">.</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>    <span class="c1"># Cyclic request by 0.1 seconds </span>
</span><span class='line'>    <span class="n">cl</span><span class="o">.</span><span class="n">loop</span><span class="p">(</span><span class="mi">0</span><span class="o">.</span><span class="mi">1</span><span class="p">)</span> <span class="k">do</span>
</span><span class='line'>      <span class="c1"># Your code</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>


<p>That's all. Play with your robots fun=)</p>

  
    <footer>
      <p class="meta">
        
        








  


<time datetime="2012-06-21T23:15:00+06:00" pubdate data-updated="true">Jun 21<span>st</span>, 2012</time>
        
      </p>
      
        <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://flipback.github.com/ruby-player/documentation/getting_started.html" data-via="" data-counturl="http://flipback.github.com/ruby-player/documentation/getting_started.html" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

      
    </footer>
  
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/ruby-player/blog/2012/06/17/rubyplayer-0-dot-6-0-has-been-released/">RubyPlayer-0.6.0 has been released</a>
      </li>
    
      <li class="post">
        <a href="/ruby-player/blog/2012/05/08/the-homepage-has-been-launched/">The project's homepage has been launched</a>
      </li>
    
  </ul>
</section>






  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Aleksey Timin -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'ruby-player';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://flipback.github.com/ruby-player/documentation/getting_started.html';
        var disqus_url = 'http://flipback.github.com/ruby-player/documentation/getting_started.html';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
